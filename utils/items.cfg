#textdomain wesnoth-Two_Brothers

#define LOOT_CHEST_OF_GOLD _SIDE _AMOUNT _X _Y
    [item]
        x,y={_X},{_Y}
        image=items/chest-plain-closed.png
    [/item]

    [event]
        name=moveto
        [filter]
            x,y={_X},{_Y}
            side={_SIDE}
        [/filter]

        [sound]
            name=open-chest.wav
        [/sound]

        [remove_item]
            x,y={_X},{_Y}
        [/remove_item]

        [item]
            x,y={_X},{_Y}
            image=items/chest-plain-open.png
        [/item]

        [redraw][/redraw]

        {VARIABLE temp_gold_found ({_AMOUNT})}

        [loot]
            side=$unit.side
            amount={_AMOUNT}
        [/loot]

        {CLEAR_VARIABLE temp_gold_found}
    [/event]
#enddef

# scenario effect items

#define ITEM_POTION_TEMP_STRENGTH _X _Y
    [event]
        name=prestart

        {VARIABLE potion_temp_strong_picked no}
    [/event]

    [item]
        x,y={_X},{_Y}
        image="items/potion-red.png"
    [/item]

    [event]
        name=moveto
        first_time_only=no

        [filter]
            side=1,2
            
            x,y={_X},{_Y}
        [/filter]

        [filter_condition]
            {VARIABLE_CONDITIONAL potion_temp_strong_picked equals no}
        [/filter_condition]

        # wmllint: markcheck off
        [item_dialog]
            variable=potion_temp_strong_picked
            name= _ "Potion of Ephemeral Strength"
            image="icons/potion_red_small.png"
            description="<i>"+_"This reddish liquid seems to be able to bestow strength to the drinker"+"</i>"
            effect= _"<span fgcolor='grey'><b>+1 Melee Damage for the duration of this scenario</b></span>"
            take_string= _"Drink It"
            leave_string= _"Refuse It"
        [/item_dialog]
        # wmllint: markcheck on

        [if]
            {VARIABLE_CONDITIONAL potion_temp_strong_picked equals yes}
            [then]
                {REMOVE_IMAGE {_X} {_Y}}
                [object]
                    silent=yes
                    duration=scenario
                    id=strong_potion_buff
                    [filter]
                        x,y={_X},{_Y}
                    [/filter]
                    [effect]
                        apply_to=attack
                        range=melee
                        increase_damage=1
                    [/effect]
                [/object]
            [/then]
        [/if]
    [/event]
#enddef

#define ITEM_POTION_TEMP_HP _X _Y
    [event]
        name=prestart

        {VARIABLE potion_temp_green_picked no}
    [/event]

    [item]
        x,y={_X},{_Y}
        image="items/potion-green.png"
    [/item]

    [event]
        name=moveto
        first_time_only=no

        [filter]
            side=1,2
            
            x,y={_X},{_Y}
        [/filter]

        [filter_condition]
            {VARIABLE_CONDITIONAL potion_temp_green_picked equals no}
        [/filter_condition]

        # wmllint: markcheck off
        [item_dialog]
            variable=potion_temp_green_picked
            name= _ "Potion of Ephemeral Endurance"
            image="icons/potion_green_small.png"
            description="<i>"+_"This green liquid seems to be able to bestow endurance to the drinker"+"</i>"
            effect= _"<span fgcolor='grey'><b>+5 HP for the duration of this scenario</b></span>"
            take_string= _"Drink It"
            leave_string= _"Refuse It"
        [/item_dialog]
        # wmllint: markcheck on

        [if]
            {VARIABLE_CONDITIONAL potion_temp_green_picked equals yes}
            [then]
                {REMOVE_IMAGE {_X} {_Y}}
                [object]
                    silent=yes
                    duration=scenario
                    id=hp_potion_buff
                    [filter]
                        x,y={_X},{_Y}
                    [/filter]
                    [effect]
                        apply_to=hitpoints
                        increase_total=5
                        heal_full=yes
                    [/effect]
                [/object]
            [/then]
        [/if]
    [/event]
#enddef

#define ITEM_POTION_TEMP_MP _X _Y
    [event]
        name=prestart

        {VARIABLE potion_temp_speed_picked no}
    [/event]

    [item]
        x,y={_X},{_Y}
        image="items/potion-blue.png"
    [/item]

    [event]
        name=moveto
        first_time_only=no

        [filter]
            side=1,2
            
            x,y={_X},{_Y}
        [/filter]

        [filter_condition]
            {VARIABLE_CONDITIONAL potion_temp_speed_picked equals no}
        [/filter_condition]

        # wmllint: markcheck off
        [item_dialog]
            variable=potion_temp_speed_picked
            name= _ "Potion of Ephemeral Agility"
            image="items/potion-blue.png"
            description="<i>"+_"This bluish liquid seems to be able to bestow speed to the drinker."+"</i>"
            effect= _"<span fgcolor='grey'><b>+1 MP for the duration of this scenario</b></span>"
            take_string= _"Drink It"
            leave_string= _"Refuse It"
        [/item_dialog]
        # wmllint: markcheck on

        [if]
            {VARIABLE_CONDITIONAL potion_temp_speed_picked equals yes}
            [then]
                {REMOVE_IMAGE {_X} {_Y}}
                [object]
                    silent=yes
                    duration=scenario
                    id=speed_potion_buff
                    [filter]
                        x,y={_X},{_Y}
                    [/filter]
                    [effect]
                        apply_to=movement
                        increase=1
                    [/effect]
                [/object]
            [/then]
        [/if]
    [/event]
#enddef

#define ITEM_POTION_ADVERSE _X _Y
    [event]
        name=prestart

        {VARIABLE potion_temp_slowing_picked no}
    [/event]

    [item]
        x,y={_X},{_Y}
        image="items/potion-yellow.png"
    [/item]

    [event]
        name=moveto
        first_time_only=no

        [filter]
            side=1,2
            
            x,y={_X},{_Y}
        [/filter]

        [filter_condition]
            {VARIABLE_CONDITIONAL potion_temp_slowing_picked equals no}
        [/filter_condition]

        # wmllint: markcheck off
        [item_dialog]
            variable=potion_temp_slowing_picked
            name= _ "Potion of Unknown Effect"
            image="items/potion-yellow.png"
            description="<i>"+_"It is not certain what effect this yellowish liquid can have on the drinker"+"</i>"
            effect= _"<span fgcolor='grey'><b>Effect Not Known</b></span>"
            take_string= _"Drink It"
            leave_string= _"Refuse It"
        [/item_dialog]
        # wmllint: markcheck on

        [if]
            {VARIABLE_CONDITIONAL potion_temp_slowing_picked equals yes}
            [then]
                {REMOVE_IMAGE {_X} {_Y}}
                [object]
                    silent=yes
                    duration=scenario
                    id=decay_potion_debuff
                    [filter]
                        x,y={_X},{_Y}
                    [/filter]
                    [effect]
                        apply_to=hitpoints
                        increase=-10%
                    [/effect]
                    [effect]
                        apply_to=status
                        add=slowed
                    [/effect]
                [/object]
            [/then]
        [/if]
    [/event]
#enddef